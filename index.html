<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinanceOS - Dashboard</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8b5cf6">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header glass">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">$</div>
                <span class="logo-text">FinanceOS</span>
            </div>
            
            <nav class="nav">
                <a href="index.html" class="nav-button active">Dashboard</a>
                <a href="csv-upload.html" class="nav-button">Upload CSV</a>
                <a href="goals.html" class="nav-button">Goals</a>
                <button class="privacy-toggle" id="privacyToggle">üîí Privacy Mode</button>
                <button class="nav-button" id="notificationSettings">üîî Notifications</button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- CSV Data Status -->
        <div class="csv-status no-data" id="csvStatus">
            üìä No recent CSV data found. <a href="csv-upload.html" style="color: #f59e0b;">Upload bank statements</a> to see transaction analysis.
        </div>

        <!-- Emergency Alert -->
        <div class="emergency-alert">
            <div class="alert-title">üö® Financial Alert: Emergency Fund Critical</div>
            <div class="alert-text">
                Your emergency fund has only $0.17. With a monthly deficit of $3,607, you're at high financial risk. 
                <strong>Immediate action required.</strong>
            </div>
        </div>

        <!-- Financial Summary -->
        <section class="financial-summary">
            <h2 class="section-title">Financial Overview</h2>
            
            <div class="summary-grid">
                <div class="summary-card glass-premium">
                    <h3>Total Assets</h3>
                    <div class="amount" style="color: #10b981;">$65,383.44</div>
                    <div class="change">Available across all accounts</div>
                </div>
                
                <div class="summary-card glass-premium">
                    <h3>Total Debt</h3>
                    <div class="amount" style="color: #ef4444;">$274,851.32</div>
                    <div class="change">Including mortgage & credit</div>
                </div>
                
                <div class="summary-card glass-premium">
                    <h3>Net Worth</h3>
                    <div class="amount" style="color: #ef4444;">-$209,467.88</div>
                    <div class="change">Mortgage impact included</div>
                </div>
                
                <div class="summary-card glass-premium">
                    <h3>Monthly Cash Flow</h3>
                    <div class="amount" style="color: #ef4444;">-$3,607</div>
                    <div class="change">Expenses exceed income</div>
                </div>
            </div>
        </section>

        <!-- Accounts Section -->
        <section class="accounts-section">
            <div class="section-header">
                <h2 class="section-title">Your Accounts</h2>
            </div>

            <div class="accounts-grid">
                <!-- Personal Accounts -->
                <div class="account-card glass">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">üí≥</div>
                        <div class="account-info">
                            <h3>My Spending</h3>
                            <div class="account-type">Personal Checking</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #10b981;">$25.92</div>
                    <div class="account-available">$25.92 Available</div>
                </div>

                <div class="account-card glass">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #10b981, #059669);">üí∞</div>
                        <div class="account-info">
                            <h3>My Savings</h3>
                            <div class="account-type">Personal Savings</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #ef4444;">$0.17</div>
                    <div class="account-available">$0.17 Available</div>
                </div>

                <!-- Joint Accounts -->
                <div class="account-card glass-premium">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #8b5cf6, #9333ea);">üè†</div>
                        <div class="account-info">
                            <h3>House Kitty</h3>
                            <div class="account-type">Joint Savings</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #10b981;">$65,357.00</div>
                    <div class="account-available">$65,357.00 Available</div>
                </div>

                <div class="account-card glass">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #f97316, #ea580c);">üßæ</div>
                        <div class="account-info">
                            <h3>Mortgage And Billing</h3>
                            <div class="account-type">Bill Payment Account</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #10b981;">$126.35</div>
                    <div class="account-available">$126.35 Available</div>
                </div>

                <div class="account-card glass">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #eab308, #ca8a04);">‚è≥</div>
                        <div class="account-info">
                            <h3>Holding</h3>
                            <div class="account-type">Temporary Account</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #10b981;">$240.40</div>
                    <div class="account-available">$240.40 Available</div>
                </div>

                <!-- Credit & Loans -->
                <div class="account-card glass">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">üí≥</div>
                        <div class="account-info">
                            <h3>Low Rate Visa</h3>
                            <div class="account-type">Credit Card</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #ef4444;">-$3,251.30</div>
                    <div class="account-available">$6,748.70 Available Credit</div>
                </div>

                <div class="account-card glass">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #6366f1, #4f46e5);">üè†</div>
                        <div class="account-info">
                            <h3>Home Loans</h3>
                            <div class="account-type">Mortgage</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #ef4444;">$271,600.02</div>
                    <div class="account-available">Principal Balance</div>
                </div>

                <!-- Investments -->
                <div class="account-card glass-premium">
                    <div class="account-header">
                        <div class="account-icon" style="background: linear-gradient(135deg, #10b981, #047857);">üìà</div>
                        <div class="account-info">
                            <h3>ANZ KiwiSaver Scheme</h3>
                            <div class="account-type">Retirement Savings</div>
                        </div>
                    </div>
                    <div class="account-balance" style="color: #10b981;">$48,733.44</div>
                    <div class="account-available">Investment Balance</div>
                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="quick-actions">
            <a href="csv-upload.html" class="action-button">
                üì§ Upload CSV
            </a>
            <a href="goals.html" class="action-button">
                üéØ View Goals
            </a>
            <button class="action-button" onclick="addTransaction()">
                ‚ûï Add Transaction
            </button>
            <button class="action-button" onclick="viewReports()">
                üìä View Reports
            </button>
        </section>
    </main>

    <script src="data-manager.js"></script>
    <script src="notification-system.js"></script>
    <script>
        // Privacy Mode Toggle - Simple Implementation
        const privacyToggle = document.getElementById('privacyToggle');
        const mainContent = document.getElementById('mainContent');
        
        let privacyMode = localStorage.getItem('privacyMode') === 'true';
        updatePrivacyMode();

        privacyToggle.addEventListener('click', () => {
            privacyMode = !privacyMode;
            localStorage.setItem('privacyMode', privacyMode);
            updatePrivacyMode();
        });

        function updatePrivacyMode() {
            if (privacyMode) {
                mainContent.classList.add('privacy-mode');
                privacyToggle.textContent = 'üîì Show Data';
                privacyToggle.classList.add('active');
            } else {
                mainContent.classList.remove('privacy-mode');
                privacyToggle.textContent = 'üîí Privacy Mode';
                privacyToggle.classList.remove('active');
            }
        }

        // Check for CSV data
        function checkCSVData() {
            const csvData = localStorage.getItem('csvData');
            const csvStatus = document.getElementById('csvStatus');
            
            if (csvData) {
                const data = JSON.parse(csvData);
                csvStatus.className = 'csv-status';
                csvStatus.innerHTML = `‚úÖ CSV data loaded: ${data.length} transactions from ${data[0]?.date || 'unknown date'}. Last updated: ${new Date(localStorage.getItem('csvUploadDate')).toLocaleDateString()}`;
            } else {
                csvStatus.className = 'csv-status no-data';
                csvStatus.innerHTML = 'üìä No recent CSV data found. <a href="csv-upload.html" style="color: #f59e0b;">Upload bank statements</a> to see transaction analysis.';
            }
        }

        // Notification Settings
        document.getElementById('notificationSettings').addEventListener('click', () => {
            if (window.FinanceOSNotifications) {
                window.FinanceOSNotifications.showNotificationSettings();
            } else {
                alert('Notification system will be available once notifications.js is loaded');
            }
        });

        // Quick action functions
        function addTransaction() {
            alert('Add Transaction feature coming soon!');
        }

        function viewReports() {
            alert('Reports feature coming soon!');
        }

        // Initialize
        checkCSVData();

        // Initialize data manager if available
        if (window.FinanceOSHelpers) {
            window.FinanceOSHelpers.initializePage();
        }

        console.log('FinanceOS Dashboard loaded successfully - No authentication required');
    </script>
</body>
</html>